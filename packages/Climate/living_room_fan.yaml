# script:

#   living_room_fan_control:
#     alias: Living Room Fan Control
#     variables:
#       living_room_fan_rf_code: >
#         {% set rf_codes = {
#               "fan_0": "sgAMAw0jJQwlDA0jJQwlDA0jDSQNJCQMJQwNIw4jJQwlDA0jJQwNIyYMJAwlDA0jDSQlDA0kDCQNJCUMJMUNJA0kJAwlDA0kJAwlDAwlDSMNJCQNJAwNJA0jJQwlDA0jJQwNIyUNJAwlCw0kDSQlDA0kDCQNJCQNJMUNJA0kJAwlDAwlJAwlDA0jDSQNJCQMJQwNIw4jJQwlDAwkJQwNJCQMJQwkDQ0jDSQlDA0kDSMNJCUMJMUNJA0kJAwlDA0jJQwlDA0jDiMNJCQMJQwNJA0jJQwlDA0jJQwNIyUNJAwlDA0jDSQlDA0jDiMNJCQMJcUNJA0kJAwlDA0kJAwlDA0kDSMNJCUMJAwNJAwkJQwlDA0jJQwNJCQMJQwlDA0jDSQlDA0jDSQNJCQMJcUNJA0jJQwlDA0jJQwkDA4jDSQNIyUMJQwNIw0kJQwkDA0kJQwNIyUMJQsmCw0kDSQlDA0jDSQNIyUMJcUNJAwlJAwlDAwkJQwkDA0kDSQNIyUMJAwOIw0kJQslDA0kJQsNJCUMJQwkDA0kDSMlDQwkDSQNIyUMJcUNIw4jJQwkDA0kJQwkDA0kDSQNIyUMJAwOIw0kJAwlDA0kJAwNJCQNJQwkDA0kDCQlDA0kDSMOIyUMJMYNIw0kJQwlDAwkJQwkDA0kDSQNIyUMJQwNIw0kJQwkDA0kJQwMJCUMJQwkDA0kDSQkDA0kDSQNIyUMJMYNIw4jJQwlCw0kJQwkDA0kDSQNIyUMJQsNJA0kJAwlDA0kJQwMJCUMJAwlDA0kDSQlCw0kDSQNIyUMJcUNJAwkJQwkDA0kJQslDA0kDSMOIyUMJQsNJA0kJAwlDA0kJQsNJCUMJQslDA0kDSQkDQwkDSQMJCUMJcUNIw0kJQwkDA0kJQslDA0kDSQMJCUMJQsNJA0kJAwlDA0kJQsNJCUMJA0kDA0jDSUkDA0kDSQMJCUMJMYNIw0kJQwkDA0kJQwkDA0kDSQMJCUMJAwNJA0kJAwlDA0kJAwNJCUMJAwlDA0kDCQlDA0kDSMNJCUMJAAF3A0kJQwkDA0kJQslDA==",
#               "fan_1": "sgDIAiQNJAwNJA0jDiMlDCQMDSQNJCULJQwNJCULDSQlDCUMJAwlDCQMDiQkDA0kDSMNJA3dDSQMJCUMJAwNJCUMJAwNJA0kDSMlDCUMDCQNJCQMJQwNJCQMDiMlDCQMJQwlDCQMDSQlDA0kDSMNJA3dDSMNJCUMJAwNJCUMJAwNJA0kDCQlCyUMDSQNIyUMJQwNIyUMDSQkDSQMJQwlDCQMDSQlDA0jDSQNJAzbDSQNIyUMJA0MJCUMJAwNJA0kDSMlDCUMDCQNJCQMJQwNJCQMDiMlDCQMJQwlDCQMDiMlDA0jDiMNJA3aDSQNIyUMJQwNIyUMJAwOIw0kDSMlDCUMDSMNJCUMJAwNJCUMDSMlDCUMJQslDCUMDSQlCw0kDSMOIw3bDSMNJCQMJQwNJCQMJQwNJA0jDSQlDCQMDSQNIyUMJQwNIyUMDSQkDCUMJQwkDCUMDSQlDA0jDSQNIw7aDSQNJCQMJQwNIyUMJQwMJA0kDSMlDCUMDSMNJCULJQwNJCULDiMlDCULJQwlDCQNDSQkDA0kDSMNJA3bDCQNJCQNJAwNIyYLJQwNJA0jDSQlDCQMDSQNIyUMJQwNIyUMDSQkDCUMJQwkDCUMDSQlCw0kDSQNIw3bDSMNJCULJQwNJCULJQwNJA0kDCQlDCUMDCQNJCQMJQwNJCQMDSQlDCQMJQwlDCQMDSQlDA0kDSMNJA3aDSQNIyUMJQwNIyUMJQwNIw0kDSQkDCUMDSMOIyUMJQsNJCUMDSMlDCUMJQslDCUMDSQlCw0kDSMNJA3bDSMNJCQNJAwNJCUMJAwNJA0kDCQlDCQMDSQNJCQMJQwNJCQMDSQlDCQMJQwkDCUMDSQlDA0jDSQNJAzbDSQNIyUMJAwOIyUMJQsNJA0kDSQkDCUMDCQNJCULJQwNJCULDiMlDCUMJQslDCUMDSMlDA0kDSMNJA0ABdw=",
#               "fan_2": "sgBUAiULDSQlDCQMDSQNIw4jJQwkDA0kDSQkDCUMDSQkDQwkJQwlCyUMJQwNIw4kJAwNJAwkDSQlwg0kDCQlDCUMDSMlDCUMDCQNJA0kJAwlDA0jDSQlDCQMDSQlDA0jJQwlDCQNJAwNJA0kJAwNJA0jDiMlwg0kDSMlDCUMDSMlDCUMDSQMJA0kJQwkDA0kDSMlDCUMDSMlDA0kJAwlDCQNJAwNJA0kJQwNIw0kDSQkww0jDSQlDCQMDSQkDCUMDSQNIw4jJQwkDA0kDSQkDCUMDSMlDA0kJQwkDCUMJQsNJA4jJQwNIw0kDSQkww0kDCQlDCQMDSQlDCQMDSQNJA0jJQwlDAwkDSQlDCQMDSQkDA0kJQwkDCUMJQwNIw0kJQwNJA0jDSQlwg0jDSQlDCQMDSQlCyUMDSQNJA0jJQwlCw0kDSQkDCUMDSQlCw0kJA0lCyUMJQsOJAwkJQwNIw4jDSQlwg0jDiMlDCQMDSQlCyYLDSQNJAwlJAwlDAwkDSQlDCQMDSQlCw4jJQwlDCQMJQwNJA0kJAwNJA0kDCQlwg0kDSMlDCUMDSMlDCQMDiMNJA0jJQwlDA0jDSQlDCQMDSQlDA0jJQwlDCUMJAwNJA0kJAwNJA0jDiMlwg4jDSQkDCUMDSQkDCUMDSQMJA0kJAwlDA0jDiMlDCUMDCQlDA0jJQwlDCQMJQwNJA0kJAwNJA0kDSMlwg0kDSQkDCUMDSMmCyUMDSQMJQwkJQslDA0kDSMlDCUMDSMlDA0kJQwkDCUMJQsNJA0kJQwNIw0kDSQkAAXcJcINIw==",
#               "fan_3": "sgD0ASQMDSQkDQ0kJAwNJA0kJAwN2g0kDSQkDCUMDSQkDCUMDSQNIw0kJQslDA0kDSMlDCUMDSMlDA0kJQwkDCUMDSQkDA0kJQwNIw4jJQwN2g0kDSMlDCULDSQlDCULDSQNJA0jJQwlDA0jDSQlDCQMDSQlDA0jJQwlDCULDSQlDA0kJAwNJA0kJAwN2w0jDSQkDCUMDSQkDCUMDSQNIw0kJQwkDA0kDSQkDCUMDSMlDA0kJAwlDCUMDSMlDA0kJQwNIw0kJQwM2w0kDSMlDCQMDSQlCyUMDSQNJAwkJQwlDA0jDSQlDCQMDSQkDA4jJQwlCyUMDSQkDQwkJQwNJA0jJQwN2g0kDSMlDCUMDSMlDCUMDSMNJA0kJAwlDA0kDSMlDCUMDSMlDA0jJQwlDCULDSQlDA0kJAwNJA0kJAwN2g0kDSQlCyUMDSMlDCUMDSQNIw0kJQslDA0kDSMlDCQNDSMlDA0jJgwkDCUMDCQlDA0kJQwNIw0kJQsN2w0jDSQkDSQMDSQlDCQMDSQNIw0kJQwkDA0kDSMmCyUMDSQkDA0kJQwkDCUMDSQkDQwkJQwNJAwkJQwN2g0kDSMlDCUMDCQlDCULDSQNJA0kJAwlDAwkDSQlDCQMDSQkDA4jJQwlCyUMDSQkDQ0kJAwNJA0jJQwNAAXcJQwNIw==",
#               "fan_4": "sgBKAw0jDiMlDCUMDCQlDCQNDCQNJA0jJQwlDA0jDSQlCyUNDCQlDAwkJQwlDCQMDSQNJA0kJAwNJA0jJgslxQ0kDSMlDCQMDiMlDCQMDSQNJA0kJAwlDA0jDSQlDCQMDSQlDAwkJQwlDCQMDiMNJA0kJAwNJA0kJAwlxQ0jDiMlDCQMDSQlDCQMDSQNJA0kJAwlDA0jDSQlCyUMDSQlDA0jJQwlDCQMDSQNJAwkJQwNJA0jJQwlwg0jDSQlDCULDSQlDCQMDSQNJA0jJQwlDAwkDSQkDCUMDSQkDQwkJQwkDSQMDSQMJA0kJQwNIw4jJQwlwg0jDSQlDCQMDSQkDCUMDSQNIw0kJQwkDA0kDSQkDCUMDSQkDA0kJAwlDCUMDSMNJA0kJQwNIw0kJAwlwwwkDSQkDCUMDSQkDCUMDCQOIw0kJQslDA0kDSMlDCQNDSMlDA0jJQ0kDCUMDCQNJA0kJQwNIw0kJQslwg0kDSMlDCUMDSMlDCQNDSMNJA0kJAwlDA0jDSQlCyUMDSQlDA0jJQwlDCULDSQNJA0kJQsNJA0jJQwlwg0jDSQlDCQMDSQkDCUMDSQNJAwkJQwlDAwkDSQkDCUMDSQkDA4jJQwkDCUMDSQMJA0lJAwNJAwkJQwkwwwkDSQlDCQMDSQlCyUMDSQMJQwkJQwkDA0kDSQkDCUMDSMlDA0kJAwlDCUMDSMNJA0kJAwOIw0kJQslwg0kDSQkDCUMDSMlDCUMDCQNJA0kJAwlDA0kDCQlDCQMDiMlDA0jJQwlDCQMDSQNJA0kJAwNJA0kJAwlwg0kDCQlDCUMDCQlDCQMDSQNJAwlJAwlDA0jDSQlDCQMDSQlCw0kJQwlDCQMDSQNIw4kJAwNJAwkJQwlwg0jDSQkDCUMDSQkDCUMDSQNIw0kJQslDA0kDSMlDCUMDSQkDA0kJQwkDCUMDSQMJA0kJQwNIw0kJQwkwg0kDSQkDCUMDSMlDCUMDSQMJA0kJQwkDA0kDCQlDCUMDSMlDA0kJAwlDCULDSQNJA0kJAwNJA0kJAwlwg0kDSMlDCUMDCQlDCUMDCQNJA0kJAwlDA0jDSQlCyUMDSQlDAwkJQwkDCYLDSQNJA0jJQwNJAwkJQwlAAXcJQwlDAwkJQwlDAwkDSQ=",
#               "fan_5": "sgD4ASUMJA0NIyUMJQwNJCQMDSQlCw0kDdwNJA0kJAwlDA0kJAwlDAwkDiMNJCQMJQwNJA0jJQwlDA0jJQwNJCQMJQwNIyUMJQwNJCQMDSQlDA0jDd0NIw0kJQslDA0kJAwlDA0kDSMNJCUMJAwNJA0jJQwlDA0kJAwNJCUMJAwNJCUMJAwNJCUMDSMlDA0jDtwNIw4jJQwlCw0kJQwkDA0kDSQNIyUMJQwMJA0kJQwkDA0kJAwNJCUMJAwNJCUMJAwNJCUMDSQkDA0kDdwNJA0jJQwlCw4jJQwlCw0kDSQNIyUMJQwNIw4jJQwkDA0kJA0NIyUMJQwNIyUMJQwNJCQMDSQkDA0kDdwOIw0kJAwlDA0kJAwlDAwkDSQNJCQMJQwNIw4jJQwkDQwkJQwNIyUMJQwNIyUMJQwNJCQMDSQlDA0jDd0MJA0kJQslDA0kJAwlDA0jDiMNJCQMJQwNJA0jJQwlDAwkJQwNJCQMJQwNIyUMJQwNJCUMDCQlDA0jDd0NIw0kJAwlDA0kJAwlDA0kDSQMJCUMJAwNJA0kJAwlDA0kJAwNJCUMJAwNJCQMJQwNJCUMDSQkDA0kDN0NJAwkJQwlDAwkJQwkDA0kDSQNIyUMJQwMJA0kJAwlDA0kJAwNJCUMJQsNJCUMJA0MJCUMDSQkDA0kDQAF3A==",
#               "fan_6": "sgC6Ag0kDSQkDCUMDSQlCw0kJQwlDAwkJQwNJA0jJQwNIyUMDSQkxg0jDSQlDCQMDSQlDCQMDSQNJAwkJQwkDA0kDSQkDCUMDSQkDA0kJQwkDA0kJQwMJQ0jJQwNIyUMDSQkxQ4jDSQlDCQMDSQkDCUMDSQNIw0kJQwkDA0kDSMlDCUMDSQkDA0kJAwlDA0kJA0NIw0kJQwMJSQMDSQkxA0jDSQlDCQMDSQkDCUMDSQNJA0kJAwlDAwkDSQlCyUMDSQlDAwkJQwlCw0kJQwNJAwlJAwNJCQMDSQlww0kDSQkDSQMDCQlDCUMDSQMJA0kJAwlDA0kDSMlDCQNDCQlDA0kJAwlDA0kJAwNJA0kJAwOIyUMDSMlxAwkDSQlDCQMDSQkDCUMDSQNIw0kJQwkDA0kDSQkDCUMDSQkDA0kJQwkDQwkJQwMJA4jJQwNJCQMDSQlww0kDCQlDCULDSQlDCQMDSQNJA0kJAwlDA0jDSQkDCUMDSQlCw0kJQwlCw4jJQwNJA0kJAwNJCQNDCQlww0kDSQkDCUMDSMlDCQNDSMNJA0kJAwlDA0jDiMlDCQNDCQlDAwkJQwlDA0jJQwNJA0kJAwOIyUMDCQlxAwkDSQlDCQMDSQlCyUMDSQMJA0kJQslDA0kDCUkDCUMDSQkDA0kJAwlDA0kJA0MJA0kJQwNIyUMDSQkxA0jDSQlDCQNDCQlCyUMDSQNJA0jJQwlDAwkDSQkDCUMDSQkDA0kJQwlDAwkJQwMJA4jJQwNIyUMDSQkxA0kDSMlDCUMDSMlDCUMDCQNJA0kJAwlCw4jDSQkDCUMDSQkDQ0jJQwkDA4jJQwNJAwkJQwNJCQMDSQlww0kDSQkDCUMDSMlDCUMDSMNJA0kJAwlDA0kDCQlDCQMDSQlDA0jJQwlDA0jJQwNJA0kJAwNJCUMDSMlAAXcJQwNJCQNDCQNJCUMDSM="
#             }
#         %}{{ rf_codes[action] }}

#     sequence:
#       - service: python_script.broadlink_send
#         data:
#           room: "living_room"
#           packet: "{{ living_room_fan_rf_code }}"

# input_boolean:
#   living_room_fan_power:

# input_number:
#   living_room_fan_speed:
#     name: Living Room Fan Speed
#     min: 0
#     max: 6
#     step: 1

# fan:
#   - platform: template
#     fans:
#       living_room_fan:
#         friendly_name: "Living Room Fan"
#         unique_id: "Living Room Fan"
#         value_template: "{{ states('input_boolean.living_room_fan_power') }}"
#         percentage_template: "{{ (states('input_number.living_room_fan_speed') | int * 16.666 ) | round }}"
#         speed_count: 6

#         turn_on:
#           #Send ON (speed) command
#           - service: script.living_room_fan_control
#             data:
#               action: "fan_{{ states('input_number.living_room_fan_speed') | round }}"

#           #Mark fan as on
#           - service: input_boolean.turn_on
#             entity_id: input_boolean.living_room_fan_power

#         set_percentage:
#           #Save new speed
#           - service: input_number.set_value
#             entity_id: input_number.living_room_fan_speed
#             data:
#               value: "{{ (percentage / 16.666) | round }}"

#           #Send speed command
#           - service: script.living_room_fan_control
#             data:
#               action: "fan_{{ states('input_number.living_room_fan_speed') | round }}"

#           #Mark fan as on
#           - service: input_boolean.turn_on
#             entity_id: input_boolean.living_room_fan_power

#         turn_off:
#           - service: script.living_room_fan_control
#             data:
#               action: "fan_0"
          
#           #Mark fan as off
#           - service: input_boolean.turn_off
#             entity_id: input_boolean.living_room_fan_power
